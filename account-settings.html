<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACCOUNT SETTINGS</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
    /* Menu button styles */
    .menu {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 20px;
    }

    .menu button {
        background: #0f3f41;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 6px;
        cursor: pointer;
        text-align: left;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: background-color 0.3s;
        width: 100%;
    }

    .menu button i {
        width: 20px;
        text-align: center;
    }

    .menu button:hover {
        background: #0a2b2c;
    }

    .menu button.active {
        background: #FFD700;
        color: #0f3f41;
        font-weight: bold;
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
    }

    .sub-tab {
        display: none;
    }

    .sub-tab.active {
        display: block;
    }

    .hidden {
        display: none !important;
    }

    .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }

    .tabs button {
        padding: 10px 15px;
        border: none;
        cursor: pointer;
        background: #0f3f41;
        border-radius: 4px;
        color: white;
    }

    .tabs button.active {
        background: #e6c200;
        color: #0f3f41;
    }

    .tabs button:hover {
        background: #e6c200;
        color: #0f3f41;
    }

    .container {
        display: flex;
    }

    .wrapper {
        width: 100%;
        height: 100%;
    }

    .container {
        display: flex;
        width: 100%;
        min-height: 600px;
        box-sizing: border-box;
    }

    .sidebar {
        width: 220px;
        flex-shrink: 0;
        background: #0f3f41;
        min-height: 100%;
    }

    .content {
        flex: 1;
        background: #fff;
        min-width: 0;
        min-height: 100%;
        margin-left: 0;
        box-sizing: border-box;
    }

    .activity-table-container {
        max-height: 400px;
        overflow-y: auto;
        margin: 20px 0;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .activity-table-container table {
        width: 100%;
        border-collapse: collapse;
    }

    .activity-table-container thead {
        position: sticky;
        top: 0;
        background: #0f3f41;
        color: white;
        z-index: 1;
    }

    .activity-table-container th,
    .activity-table-container td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    .activity-table-container tbody tr:hover {
        background-color: #f5f5f5;
    }

    .activity-table-container thead th {
        border-bottom: 2px solid #ddd;
    }
    </style>
</head>
<body class="user-settings-bg">
    <div class="upperbar">
        <div class="topbar">
            <span>[üìû 0973 727 8473]</span>
            <span><a href="mailto:pcvcarillolaw@gmail.com" class="email-link">[ <i class="fas fa-envelope"></i> pcvcarillolaw@gmail.com]</a></span>
        </div>
        <nav class="navbar">
            <div class="logo">
                <a href="index.html"><img src="src/web_logo-removebg-preview.png" alt="Carillo Law Office"></a>
                <span><a href="index.html" class="webname">CARILLO LAW</a></span>
            </div>

            <ul class="nav-links">
                <li><a href="index.html">HOME</a></li>
                <li><a href="#">ABOUT</a></li>
                <li><a href="services.html">SERVICES</a></li>
                <li><a href="#">CONTACTS</a></li>
                <li><a href="#">TESTIMONIALS</a></li>
                <li><a href="#">APPOINTMENTS</a></li>
                <li>
                    <div class="user-dropdown">
                        <a href="profile.html" class="user-nav" style="color:#FFD700; font-weight:bold; display:flex; align-items:center; gap:6px; text-decoration:none; text-transform:none;">
                            <i class="fas fa-user-circle" style="font-size: 20px;"></i>
                            <span id="navUserName">User</span>
                        </a>
                        <div class="user-dropdown-content">
                            <a href="account-settings.html" class="dropdown-btn"><i class="fas fa-cog"></i> Settings</a>
                            <a href="logout.html" class="dropdown-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
    </div>

    <div class="wrapper">
        <div class="container">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="avatar" id="userAvatar">
                    <i class="fa-solid fa-user" style="font-size:48px; color:white"></i>
                </div>
                <div class="user-name" id="userName">John Doe</div>
                <div class="menu">
                    <button onclick="showTab('overview', this)" class="active">
                        <i class="fas fa-chart-line"></i> Overview
                    </button>
                    <button onclick="showTab('settings', this)">
                        <i class="fas fa-user-cog"></i> Account Settings
                    </button>
                    <button onclick="showTab('help', this)">
                        <i class="fas fa-circle-question"></i> Help
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="content">
                <!-- Overview -->
                <div id="overview" class="tab-content">
                    <h2>Activity Feed</h2>
                    <div class="activity-table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Transaction #</th>
                                    <th>Date/Time</th>
                                    <th>Activity</th>
                                </tr>
                            </thead>
                            <tbody id="activityTableBody">
                                <tr>
                                    <td>1</td>
                                    <td>2025-01-15 10:30:00</td>
                                    <td>login</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>2025-01-14 15:20:00</td>
                                    <td>profile_update</td>
                                </tr>
                                <!-- More activities would be loaded from backend -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Account Settings -->
                <div id="settings" class="tab-content hidden">
                    <div class="tabs">
                        <button onclick="showSubTab('accountInfo', this)" class="active">User Account Info</button>
                        <button onclick="showSubTab('avatarChange', this)">Change Avatar</button>
                        <button onclick="showSubTab('passwordChange', this)">Change Password</button>
                    </div>

                    <!-- User Account Info -->
                    <div id="accountInfo" class="sub-tab active">
                        <form id="profileForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" name="email" id="profileEmail" value="user@example.com">
                                </div>
                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" name="username" id="profileUsername" value="username">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>First Name</label>
                                    <input type="text" name="first_name" id="profileFirstName" value="John">
                                </div>
                                <div class="form-group">
                                    <label>Last Name</label>
                                    <input type="text" name="last_name" id="profileLastName" value="Doe">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Mobile Number</label>
                                    <input type="tel" name="contact_number" id="profileMobile" value="09123456789">
                                </div>
                            </div>
                            <div id="profileMessages"></div>
                            <div class="form-actions">
                                <button type="submit" class="change-pass">Save Changes</button>
                            </div>
                        </form>
                    </div>

                    <!-- Change Avatar -->
                    <div id="avatarChange" class="sub-tab hidden">
                        <form id="avatarForm" enctype="multipart/form-data">
                            <div class="avatar-preview">
                                <img id="avatarPreviewImg" src="" alt="Avatar Preview" style="display:none; width:150px; height:150px; border-radius:50%; object-fit:cover;">
                                <i class="fa-solid fa-user" id="avatarPlaceholder" style="font-size:48px; color:#999"></i>
                            </div>

                            <div class="form-group">
                                <label>Select New Profile Picture</label>
                                <input type="file" id="avatarInput" name="avatar" accept="image/jpeg,image/png,image/gif">
                                <small>Max file size: 5MB. Allowed formats: JPG, PNG, GIF</small>
                            </div>
                            <div id="avatarMessages"></div>
                            <div class="form-actions">
                                <button type="submit" class="change-pass">Update Profile Picture</button>
                                <button type="button" onclick="resetAvatar()">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <!-- Change Password -->
                    <div id="passwordChange" class="sub-tab hidden">
                        <form id="passwordForm">
                            <div class="form-group">
                                <label>Current Password</label>
                                <div class="password-wrapper">
                                    <input type="password" name="current_password" placeholder="Current Password" id="currentPassword" required />
                                    <img src="https://cdn-icons-png.flaticon.com/512/565/565655.png" alt="Show" id="toggleCurrentPassword" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label>New Password</label>
                                <div class="password-wrapper">
                                    <input type="password" name="new_password" placeholder="New Password" id="newPassword" required />
                                    <img src="https://cdn-icons-png.flaticon.com/512/565/565655.png" alt="Show" id="toggleNewPassword" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Confirm New Password</label>
                                <div class="password-wrapper">
                                    <input type="password" name="confirm_password" placeholder="Confirm New Password" id="confirmNewPassword" required />
                                    <img src="https://cdn-icons-png.flaticon.com/512/565/565655.png" alt="Show" id="toggleConfirmPassword" />
                                </div>
                            </div>
                            <div id="passwordMessages"></div>
                            <div class="form-actions">
                                <button type="submit" class="change-pass">Change Password</button>
                                <button type="button" onclick="clearPasswordFields()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Help -->
                <div id="help" class="tab-content hidden">
                    <h2 class="help-head">FAQs</h2>
                    <div class="faq-accordion">
                        <div class="faq-item">
                            <button class="faq-question" data-target="faq1"><span class="number">1.</span> How do I change my password?</button>
                            <div id="faq1" class="faq-answer">
                                <p><strong>A:</strong> Go to Account Settings ‚Üí Change Password.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <button class="faq-question" data-target="faq2"><span class="number">2.</span> How do I update my profile picture?</button>
                            <div id="faq2" class="faq-answer">
                                <p><strong>A:</strong> Go to Account Settings ‚Üí Change Avatar.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <button class="faq-question" data-target="faq3"><span class="number">3.</span> How can I contact support?</button>
                            <div id="faq3" class="faq-answer">
                                <p><strong>A:</strong> Email support@example.com.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section about">
                <h3>Carillo Law Office</h3>
                <p>Providing trusted legal and notarial services in civil, real estate, and contract law for over 5 years.</p>
            </div>
            <div class="footer-section contact">
                <h4>Contact Us</h4>
                <p>üìç 9017 C.P. Trinidad St., Concepcion, Baliuag, Philippines</p>
                <p>üìû 0973 727 8473</p>
                <p><a href="mailto:pcvcarillolaw@gmail.com" class="email-link"><i class="fas fa-envelope"></i> pcvcarillolaw@gmail.com</a></p>
                <p>
                    <a href="https://www.facebook.com/profile.php?id=100083055586233" 
                        target="_blank" 
                        rel="noopener noreferrer"
                        class="facebook-link">
                        <i class="fab fa-facebook-square" style="margin-right: 5px;"></i> Facebook
                    </a>
                </p>
            </div>
            <div class="footer-section hours">
                <h4>Office Hours</h4>
                <p>Mon ‚Äì Fri: 9:00 AM ‚Äì 6:00 PM</p>
                <p>Sat: 8:00 AM ‚Äì 5:00 PM</p>
                <p>Sun & Holidays: Closed</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Carillo Law Office. All rights reserved.</p>
            <p>All legal services comply with Philippine law. This website is for informational purposes only and does not constitute legal advice.</p>
        </div>
    </footer>

    <script>
        // Load user data from localStorage (simulated session)
        function loadUserData() {
            const userData = {
                firstName: localStorage.getItem('userFirstName') || 'John',
                lastName: localStorage.getItem('userLastName') || 'Doe',
                email: localStorage.getItem('userEmail') || 'user@example.com',
                username: localStorage.getItem('userUsername') || 'username',
                mobile: localStorage.getItem('userMobile') || '09123456789'
            };

            // Update UI
            document.getElementById('userName').textContent = `${userData.firstName} ${userData.lastName}`;
            document.getElementById('navUserName').textContent = userData.firstName;
            document.getElementById('profileEmail').value = userData.email;
            document.getElementById('profileUsername').value = userData.username;
            document.getElementById('profileFirstName').value = userData.firstName;
            document.getElementById('profileLastName').value = userData.lastName;
            document.getElementById('profileMobile').value = userData.mobile;
        }

        // Tab navigation
        function showTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
                tab.classList.remove('active');
            });
            
            const selectedTab = document.getElementById(tabId);
            if (selectedTab) {
                selectedTab.classList.remove('hidden');
                selectedTab.classList.add('active');
            }

            document.querySelectorAll('.menu button').forEach(btn => {
                btn.classList.remove('active');
            });
            el.classList.add('active');

            if (tabId === 'settings') {
                const firstSubTab = document.querySelector('.tabs button');
                if (firstSubTab) {
                    showSubTab('accountInfo', firstSubTab);
                }
            }
        }

        function showSubTab(subId, el) {
            document.querySelectorAll('.sub-tab').forEach(subTab => {
                subTab.classList.add('hidden');
                subTab.classList.remove('active');
            });
            
            const selectedSubTab = document.getElementById(subId);
            if (selectedSubTab) {
                selectedSubTab.classList.remove('hidden');
                selectedSubTab.classList.add('active');
            }

            document.querySelectorAll('.tabs button').forEach(btn => {
                btn.classList.remove('active');
            });
            el.classList.add('active');
        }

        function clearPasswordFields() {
            document.getElementById('passwordForm').reset();
        }

        function resetAvatar() {
            document.getElementById('avatarForm').reset();
            document.getElementById('avatarPreviewImg').style.display = 'none';
            document.getElementById('avatarPlaceholder').style.display = 'block';
        }

        // Password toggle
        function setupToggle(toggleId, inputId) {
            const toggle = document.getElementById(toggleId);
            const input = document.getElementById(inputId);

            if (toggle && input) {
                toggle.addEventListener("click", function () {
                    const isPassword = input.getAttribute("type") === "password";
                    input.setAttribute("type", isPassword ? "text" : "password");
                    toggle.src = isPassword
                        ? "https://cdn-icons-png.flaticon.com/512/159/159604.png" 
                        : "https://cdn-icons-png.flaticon.com/512/565/565655.png";
                });
            }
        }

        // FAQ accordion
        function setupFAQAccordion() {
            const faqButtons = document.querySelectorAll('.faq-question');
            const allAnswers = document.querySelectorAll('.faq-answer');

            faqButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.getAttribute('data-target');
                    const targetAnswer = document.getElementById(targetId);

                    allAnswers.forEach(answer => {
                        if (answer !== targetAnswer) {
                            answer.classList.remove('active');
                        }
                    });

                    if (targetAnswer) {
                        targetAnswer.classList.toggle('active');
                    }
                });
            });
        }

        // Avatar preview
        document.getElementById('avatarInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB');
                    this.value = '';
                    return;
                }
                
                const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
                if (!allowedTypes.includes(file.type)) {
                    alert('Only JPG, PNG and GIF images are allowed');
                    this.value = '';
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('avatarPreviewImg').src = e.target.result;
                    document.getElementById('avatarPreviewImg').style.display = 'block';
                    document.getElementById('avatarPlaceholder').style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        });

        // Form submissions (simulated - would connect to backend)
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // In production, this would send data to backend
            const formData = new FormData(this);
            localStorage.setItem('userEmail', formData.get('email'));
            localStorage.setItem('userUsername', formData.get('username'));
            localStorage.setItem('userFirstName', formData.get('first_name'));
            localStorage.setItem('userLastName', formData.get('last_name'));
            localStorage.setItem('userMobile', formData.get('contact_number'));
            
            document.getElementById('profileMessages').innerHTML = '<div class="success-message">Profile updated successfully!</div>';
            loadUserData();
        });

        document.getElementById('passwordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmNewPassword').value;
            
            if (newPass !== confirmPass) {
                document.getElementById('passwordMessages').innerHTML = '<div class="error-message">New passwords do not match.</div>';
                return;
            }
            
            // In production, this would send data to backend
            document.getElementById('passwordMessages').innerHTML = '<div class="success-message">Password changed successfully!</div>';
            this.reset();
        });

        document.getElementById('avatarForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // In production, this would send data to backend
            document.getElementById('avatarMessages').innerHTML = '<div class="success-message">Profile picture updated successfully!</div>';
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            setupToggle("toggleCurrentPassword", "currentPassword");
            setupToggle("toggleNewPassword", "newPassword");
            setupToggle("toggleConfirmPassword", "confirmNewPassword");
            setupFAQAccordion();
        });
    </script>
</body>
</html>